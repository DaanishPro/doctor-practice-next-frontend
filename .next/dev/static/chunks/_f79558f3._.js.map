{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/daaniyal%20shaikh/OneDrive/Desktop/DAANISH%20SHAIKH/Next%2BNode/doctor-practice-web/next-js/components/admin/DashboardStats.tsx"],"sourcesContent":["\"use client\";\r\nimport { Users, Calendar, MessageSquare, DollarSign, TrendingUp } from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function DashboardStats() {\r\n  const [stats, setStats] = useState({ users: 0, appointments: 0, messages: 0, revenue: 0 });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetch(`${process.env.NEXT_PUBLIC_API_URL}/admin/stats`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setStats(data);\r\n        setLoading(false);\r\n      })\r\n      .catch(err => {\r\n        console.log(\"Using default stats\");\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const cards = [\r\n    { \r\n      label: \"Total Patients\", \r\n      val: stats.users || 120, \r\n      icon: Users, \r\n      gradient: \"from-blue-500 to-cyan-500\",\r\n      bgGradient: \"from-blue-50 to-cyan-50\",\r\n      change: \"+12%\"\r\n    },\r\n    { \r\n      label: \"Appointments\", \r\n      val: stats.appointments || 45, \r\n      icon: Calendar, \r\n      gradient: \"from-purple-500 to-pink-500\",\r\n      bgGradient: \"from-purple-50 to-pink-50\",\r\n      change: \"+8%\"\r\n    },\r\n    { \r\n      label: \"Messages\", \r\n      val: stats.messages || 12, \r\n      icon: MessageSquare, \r\n      gradient: \"from-orange-500 to-amber-500\",\r\n      bgGradient: \"from-orange-50 to-amber-50\",\r\n      change: \"+5%\"\r\n    },\r\n    { \r\n      label: \"Revenue\", \r\n      val: `$${(stats.revenue || 5400).toLocaleString()}`, \r\n      icon: DollarSign, \r\n      gradient: \"from-green-500 to-emerald-500\",\r\n      bgGradient: \"from-green-50 to-emerald-50\",\r\n      change: \"+15%\"\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n      {cards.map((card, idx) => {\r\n        const Icon = card.icon;\r\n        return (\r\n          <div \r\n            key={idx} \r\n            className={`\r\n              bg-white p-6 rounded-2xl border border-slate-200 \r\n              shadow-sm hover:shadow-xl transition-all duration-300\r\n              card-hover group relative overflow-hidden\r\n            `}\r\n          >\r\n            {/* Background Gradient */}\r\n            <div className={`absolute inset-0 bg-linear-to-br ${card.bgGradient} opacity-0 group-hover:opacity-100 transition-opacity duration-300`}></div>\r\n            \r\n            <div className=\"relative\">\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className={`w-14 h-14 bg-linear-to-br ${card.gradient} rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`}>\r\n                  <Icon className=\"text-white\" size={24} />\r\n                </div>\r\n                <div className=\"flex items-center gap-1 text-xs font-semibold text-green-600 bg-green-50 px-2 py-1 rounded-full\">\r\n                  <TrendingUp size={14} />\r\n                  <span>{card.change}</span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <p className=\"text-slate-500 text-sm font-medium mb-1\">{card.label}</p>\r\n                {loading ? (\r\n                  <div className=\"h-10 w-24 bg-slate-200 rounded-lg animate-pulse\"></div>\r\n                ) : (\r\n                  <h3 className=\"text-3xl font-bold text-slate-900\">{card.val}</h3>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AASa;;AARb;AAAA;AAAA;AAAA;AAAA;AACA;;;AAFA;;;AAIe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;QAAE,OAAO;QAAG,cAAc;QAAG,UAAU;QAAG,SAAS;IAAE;IACxF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;oCAAC;YACR,MAAM,iEAAmC,YAAY,CAAC,EACnD,IAAI;4CAAC,CAAA,MAAO,IAAI,IAAI;2CACpB,IAAI;4CAAC,CAAA;oBACJ,SAAS;oBACT,WAAW;gBACb;2CACC,KAAK;4CAAC,CAAA;oBACL,QAAQ,GAAG,CAAC;oBACZ,WAAW;gBACb;;QACJ;mCAAG,EAAE;IAEL,MAAM,QAAQ;QACZ;YACE,OAAO;YACP,KAAK,MAAM,KAAK,IAAI;YACpB,MAAM,gNAAK;YACX,UAAU;YACV,YAAY;YACZ,QAAQ;QACV;QACA;YACE,OAAO;YACP,KAAK,MAAM,YAAY,IAAI;YAC3B,MAAM,yNAAQ;YACd,UAAU;YACV,YAAY;YACZ,QAAQ;QACV;QACA;YACE,OAAO;YACP,KAAK,MAAM,QAAQ,IAAI;YACvB,MAAM,4OAAa;YACnB,UAAU;YACV,YAAY;YACZ,QAAQ;QACV;QACA;YACE,OAAO;YACP,KAAK,CAAC,CAAC,EAAE,CAAC,MAAM,OAAO,IAAI,IAAI,EAAE,cAAc,IAAI;YACnD,MAAM,mOAAU;YAChB,UAAU;YACV,YAAY;YACZ,QAAQ;QACV;KACD;IAED,qBACE,6LAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,MAAM;YAChB,MAAM,OAAO,KAAK,IAAI;YACtB,qBACE,6LAAC;gBAEC,WAAW,CAAC;;;;YAIZ,CAAC;;kCAGD,6LAAC;wBAAI,WAAW,CAAC,iCAAiC,EAAE,KAAK,UAAU,CAAC,kEAAkE,CAAC;;;;;;kCAEvI,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAW,CAAC,0BAA0B,EAAE,KAAK,QAAQ,CAAC,8GAA8G,CAAC;kDACxK,cAAA,6LAAC;4CAAK,WAAU;4CAAa,MAAM;;;;;;;;;;;kDAErC,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,mOAAU;gDAAC,MAAM;;;;;;0DAClB,6LAAC;0DAAM,KAAK,MAAM;;;;;;;;;;;;;;;;;;0CAItB,6LAAC;;kDACC,6LAAC;wCAAE,WAAU;kDAA2C,KAAK,KAAK;;;;;;oCACjE,wBACC,6LAAC;wCAAI,WAAU;;;;;6DAEf,6LAAC;wCAAG,WAAU;kDAAqC,KAAK,GAAG;;;;;;;;;;;;;;;;;;;eA1B5D;;;;;QAgCX;;;;;;AAGN;GA7FwB;KAAA"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/daaniyal%20shaikh/OneDrive/Desktop/DAANISH%20SHAIKH/Next%2BNode/doctor-practice-web/next-js/components/admin/UserAppointment.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Calendar, Clock, User, Phone, Mail, Search, Filter, MoreVertical, CheckCircle2, XCircle, Clock as ClockIcon } from \"lucide-react\";\r\n\r\ninterface Appointment {\r\n  _id?: string;\r\n  name: string;\r\n  email: string;\r\n  phone: string;\r\n  date: string;\r\n  service: string;\r\n  status?: string;\r\n  notes?: string;\r\n}\r\n\r\ninterface UserAppointmentsProps {\r\n  compact?: boolean;\r\n}\r\n\r\nexport default function UserAppointments({ compact = false }: UserAppointmentsProps) {\r\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [filterStatus, setFilterStatus] = useState<string>(\"all\");\r\n\r\n  useEffect(() => {\r\n    fetch(`${process.env.NEXT_PUBLIC_API_URL}/admin/appointments`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setAppointments(Array.isArray(data) ? data : []);\r\n        setLoading(false);\r\n      })\r\n      .catch(() => {\r\n        console.log(\"Using sample appointments data\");\r\n        setAppointments([\r\n          {\r\n            name: \"John Doe\",\r\n            email: \"john@example.com\",\r\n            phone: \"+1 (555) 123-4567\",\r\n            date: \"2024-12-24T10:00:00\",\r\n            service: \"Cardiology\",\r\n            status: \"pending\"\r\n          },\r\n          {\r\n            name: \"Jane Smith\",\r\n            email: \"jane@example.com\",\r\n            phone: \"+1 (555) 234-5678\",\r\n            date: \"2024-12-25T14:30:00\",\r\n            service: \"General Consultation\",\r\n            status: \"confirmed\"\r\n          },\r\n          {\r\n            name: \"Robert Johnson\",\r\n            email: \"robert@example.com\",\r\n            phone: \"+1 (555) 345-6789\",\r\n            date: \"2024-12-26T09:00:00\",\r\n            service: \"Pediatrics\",\r\n            status: \"pending\"\r\n          }\r\n        ]);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString(\"en-US\", { \r\n      month: \"short\", \r\n      day: \"numeric\", \r\n      year: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\"\r\n    });\r\n  };\r\n\r\n  const getStatusBadge = (status: string = \"pending\") => {\r\n    const statusConfig = {\r\n      pending: { \r\n        icon: ClockIcon, \r\n        bg: \"bg-yellow-50\", \r\n        text: \"text-yellow-700\", \r\n        border: \"border-yellow-200\",\r\n        label: \"Pending\"\r\n      },\r\n      confirmed: { \r\n        icon: CheckCircle2, \r\n        bg: \"bg-green-50\", \r\n        text: \"text-green-700\", \r\n        border: \"border-green-200\",\r\n        label: \"Confirmed\"\r\n      },\r\n      cancelled: { \r\n        icon: XCircle, \r\n        bg: \"bg-red-50\", \r\n        text: \"text-red-700\", \r\n        border: \"border-red-200\",\r\n        label: \"Cancelled\"\r\n      },\r\n    };\r\n    \r\n    const config = statusConfig[status as keyof typeof statusConfig] || statusConfig.pending;\r\n    const Icon = config.icon;\r\n    \r\n    return (\r\n      <span className={`inline-flex items-center gap-1.5 ${config.bg} ${config.text} ${config.border} border px-3 py-1.5 rounded-lg text-xs font-semibold`}>\r\n        <Icon size={14} />\r\n        <span>{config.label}</span>\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const filteredAppointments = appointments.filter(apt => {\r\n    const matchesSearch = apt.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         apt.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         apt.service.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesFilter = filterStatus === \"all\" || apt.status === filterStatus;\r\n    return matchesSearch && matchesFilter;\r\n  });\r\n\r\n  const displayedAppointments = compact ? filteredAppointments.slice(0, 5) : filteredAppointments;\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"p-6 border-b border-slate-200 bg-linear-to-r from-slate-50 to-cyan-50/30\">\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n          <div>\r\n            <h3 className=\"text-2xl font-bold text-slate-900 flex items-center gap-2\">\r\n              <Calendar className=\"text-cyan-600\" size={24} />\r\n              {compact ? \"Recent Appointments\" : \"All Appointments\"}\r\n            </h3>\r\n            <p className=\"text-slate-500 text-sm mt-1\">\r\n              {compact ? \"Latest 5 appointments\" : `Total: ${filteredAppointments.length} appointments`}\r\n            </p>\r\n          </div>\r\n          \r\n          {!compact && (\r\n            <div className=\"flex flex-col sm:flex-row gap-3\">\r\n              {/* Search */}\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400\" size={18} />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search appointments...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none text-sm w-full sm:w-64\"\r\n                />\r\n              </div>\r\n              \r\n              {/* Filter */}\r\n              <div className=\"relative\">\r\n                <Filter className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400\" size={18} />\r\n                <select\r\n                  value={filterStatus}\r\n                  onChange={(e) => setFilterStatus(e.target.value)}\r\n                  className=\"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none text-sm appearance-none cursor-pointer\"\r\n                >\r\n                  <option value=\"all\">All Status</option>\r\n                  <option value=\"pending\">Pending</option>\r\n                  <option value=\"confirmed\">Confirmed</option>\r\n                  <option value=\"cancelled\">Cancelled</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"overflow-x-auto\">\r\n        {loading ? (\r\n          <div className=\"p-12 text-center\">\r\n            <div className=\"inline-block w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin\"></div>\r\n            <p className=\"text-slate-500 mt-4\">Loading appointments...</p>\r\n          </div>\r\n        ) : displayedAppointments.length === 0 ? (\r\n          <div className=\"p-12 text-center\">\r\n            <Calendar className=\"mx-auto text-slate-300 mb-4\" size={48} />\r\n            <p className=\"text-slate-500 font-medium\">No appointments found</p>\r\n            <p className=\"text-slate-400 text-sm mt-1\">Try adjusting your search or filters</p>\r\n          </div>\r\n        ) : (\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-slate-50 border-b border-slate-200\">\r\n              <tr>\r\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider\">Patient</th>\r\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider\">Service</th>\r\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider\">Date & Time</th>\r\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider\">Contact</th>\r\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider\">Status</th>\r\n                {!compact && <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider\">Actions</th>}\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-slate-100\">\r\n              {displayedAppointments.map((appointment, index) => (\r\n                <tr key={appointment._id || index} className=\"hover:bg-cyan-50/50 transition-colors\">\r\n                  <td className=\"px-6 py-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"w-10 h-10 bg-linear-to-br from-cyan-500 to-teal-600 rounded-lg flex items-center justify-center shrink-0\">\r\n                        <User className=\"text-white\" size={18} />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"font-semibold text-slate-900\">{appointment.name}</p>\r\n                        <p className=\"text-sm text-slate-500\">{appointment.email}</p>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <span className=\"text-slate-700 font-medium\">{appointment.service}</span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <div className=\"flex items-center gap-2 text-slate-600\">\r\n                      <Clock size={16} className=\"text-slate-400\" />\r\n                      <span className=\"text-sm\">{formatDate(appointment.date)}</span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <div className=\"flex flex-col gap-1\">\r\n                      <div className=\"flex items-center gap-1.5 text-sm text-slate-600\">\r\n                        <Phone size={14} className=\"text-slate-400\" />\r\n                        <span>{appointment.phone}</span>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    {getStatusBadge(appointment.status)}\r\n                  </td>\r\n                  {!compact && (\r\n                    <td className=\"px-6 py-4\">\r\n                      <button className=\"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors\">\r\n                        <MoreVertical size={18} />\r\n                      </button>\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n\r\n      {compact && filteredAppointments.length > 5 && (\r\n        <div className=\"p-4 border-t border-slate-200 bg-slate-50 text-center\">\r\n          <button className=\"text-cyan-600 hover:text-cyan-700 font-semibold text-sm\">\r\n            View All Appointments →\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AA0Ba;;AAzBb;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAFA;;;AAmBe,SAAS,iBAAiB,EAAE,UAAU,KAAK,EAAyB;;IACjF,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB,EAAE;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAS;IAEzD,IAAA,0KAAS;sCAAC;YACR,MAAM,iEAAmC,mBAAmB,CAAC,EAC1D,IAAI;8CAAC,CAAA,MAAO,IAAI,IAAI;6CACpB,IAAI;8CAAC,CAAA;oBACJ,gBAAgB,MAAM,OAAO,CAAC,QAAQ,OAAO,EAAE;oBAC/C,WAAW;gBACb;6CACC,KAAK;8CAAC;oBACL,QAAQ,GAAG,CAAC;oBACZ,gBAAgB;wBACd;4BACE,MAAM;4BACN,OAAO;4BACP,OAAO;4BACP,MAAM;4BACN,SAAS;4BACT,QAAQ;wBACV;wBACA;4BACE,MAAM;4BACN,OAAO;4BACP,OAAO;4BACP,MAAM;4BACN,SAAS;4BACT,QAAQ;wBACV;wBACA;4BACE,MAAM;4BACN,OAAO;4BACP,OAAO;4BACP,MAAM;4BACN,SAAS;4BACT,QAAQ;wBACV;qBACD;oBACD,WAAW;gBACb;;QACJ;qCAAG,EAAE;IAEL,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC,SAAS;YACtC,OAAO;YACP,KAAK;YACL,MAAM;YACN,MAAM;YACN,QAAQ;QACV;IACF;IAEA,MAAM,iBAAiB,CAAC,SAAiB,SAAS;QAChD,MAAM,eAAe;YACnB,SAAS;gBACP,MAAM,gNAAS;gBACf,IAAI;gBACJ,MAAM;gBACN,QAAQ;gBACR,OAAO;YACT;YACA,WAAW;gBACT,MAAM,wOAAY;gBAClB,IAAI;gBACJ,MAAM;gBACN,QAAQ;gBACR,OAAO;YACT;YACA,WAAW;gBACT,MAAM,0NAAO;gBACb,IAAI;gBACJ,MAAM;gBACN,QAAQ;gBACR,OAAO;YACT;QACF;QAEA,MAAM,SAAS,YAAY,CAAC,OAAoC,IAAI,aAAa,OAAO;QACxF,MAAM,OAAO,OAAO,IAAI;QAExB,qBACE,6LAAC;YAAK,WAAW,CAAC,iCAAiC,EAAE,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,IAAI,CAAC,CAAC,EAAE,OAAO,MAAM,CAAC,oDAAoD,CAAC;;8BAClJ,6LAAC;oBAAK,MAAM;;;;;;8BACZ,6LAAC;8BAAM,OAAO,KAAK;;;;;;;;;;;;IAGzB;IAEA,MAAM,uBAAuB,aAAa,MAAM,CAAC,CAAA;QAC/C,MAAM,gBAAgB,IAAI,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,OACvD,IAAI,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,OACvD,IAAI,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW;QAC9E,MAAM,gBAAgB,iBAAiB,SAAS,IAAI,MAAM,KAAK;QAC/D,OAAO,iBAAiB;IAC1B;IAEA,MAAM,wBAAwB,UAAU,qBAAqB,KAAK,CAAC,GAAG,KAAK;IAE3E,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC,yNAAQ;4CAAC,WAAU;4CAAgB,MAAM;;;;;;wCACzC,UAAU,wBAAwB;;;;;;;8CAErC,6LAAC;oCAAE,WAAU;8CACV,UAAU,0BAA0B,CAAC,OAAO,EAAE,qBAAqB,MAAM,CAAC,aAAa,CAAC;;;;;;;;;;;;wBAI5F,CAAC,yBACA,6LAAC;4BAAI,WAAU;;8CAEb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,mNAAM;4CAAC,WAAU;4CAAoE,MAAM;;;;;;sDAC5F,6LAAC;4CACC,MAAK;4CACL,aAAY;4CACZ,OAAO;4CACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;4CAC7C,WAAU;;;;;;;;;;;;8CAKd,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,mNAAM;4CAAC,WAAU;4CAAoE,MAAM;;;;;;sDAC5F,6LAAC;4CACC,OAAO;4CACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;4CAC/C,WAAU;;8DAEV,6LAAC;oDAAO,OAAM;8DAAM;;;;;;8DACpB,6LAAC;oDAAO,OAAM;8DAAU;;;;;;8DACxB,6LAAC;oDAAO,OAAM;8DAAY;;;;;;8DAC1B,6LAAC;oDAAO,OAAM;8DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAStC,6LAAC;gBAAI,WAAU;0BACZ,wBACC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;;;;;sCACf,6LAAC;4BAAE,WAAU;sCAAsB;;;;;;;;;;;2BAEnC,sBAAsB,MAAM,KAAK,kBACnC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,yNAAQ;4BAAC,WAAU;4BAA8B,MAAM;;;;;;sCACxD,6LAAC;4BAAE,WAAU;sCAA6B;;;;;;sCAC1C,6LAAC;4BAAE,WAAU;sCAA8B;;;;;;;;;;;yCAG7C,6LAAC;oBAAM,WAAU;;sCACf,6LAAC;4BAAM,WAAU;sCACf,cAAA,6LAAC;;kDACC,6LAAC;wCAAG,WAAU;kDAAoF;;;;;;kDAClG,6LAAC;wCAAG,WAAU;kDAAoF;;;;;;kDAClG,6LAAC;wCAAG,WAAU;kDAAoF;;;;;;kDAClG,6LAAC;wCAAG,WAAU;kDAAoF;;;;;;kDAClG,6LAAC;wCAAG,WAAU;kDAAoF;;;;;;oCACjG,CAAC,yBAAW,6LAAC;wCAAG,WAAU;kDAAoF;;;;;;;;;;;;;;;;;sCAGnH,6LAAC;4BAAM,WAAU;sCACd,sBAAsB,GAAG,CAAC,CAAC,aAAa,sBACvC,6LAAC;oCAAkC,WAAU;;sDAC3C,6LAAC;4CAAG,WAAU;sDACZ,cAAA,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;kEACb,cAAA,6LAAC,6MAAI;4DAAC,WAAU;4DAAa,MAAM;;;;;;;;;;;kEAErC,6LAAC;;0EACC,6LAAC;gEAAE,WAAU;0EAAgC,YAAY,IAAI;;;;;;0EAC7D,6LAAC;gEAAE,WAAU;0EAA0B,YAAY,KAAK;;;;;;;;;;;;;;;;;;;;;;;sDAI9D,6LAAC;4CAAG,WAAU;sDACZ,cAAA,6LAAC;gDAAK,WAAU;0DAA8B,YAAY,OAAO;;;;;;;;;;;sDAEnE,6LAAC;4CAAG,WAAU;sDACZ,cAAA,6LAAC;gDAAI,WAAU;;kEACb,6LAAC,gNAAK;wDAAC,MAAM;wDAAI,WAAU;;;;;;kEAC3B,6LAAC;wDAAK,WAAU;kEAAW,WAAW,YAAY,IAAI;;;;;;;;;;;;;;;;;sDAG1D,6LAAC;4CAAG,WAAU;sDACZ,cAAA,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDAAI,WAAU;;sEACb,6LAAC,gNAAK;4DAAC,MAAM;4DAAI,WAAU;;;;;;sEAC3B,6LAAC;sEAAM,YAAY,KAAK;;;;;;;;;;;;;;;;;;;;;;sDAI9B,6LAAC;4CAAG,WAAU;sDACX,eAAe,YAAY,MAAM;;;;;;wCAEnC,CAAC,yBACA,6LAAC;4CAAG,WAAU;sDACZ,cAAA,6LAAC;gDAAO,WAAU;0DAChB,cAAA,6LAAC,6OAAY;oDAAC,MAAM;;;;;;;;;;;;;;;;;mCAnCnB,YAAY,GAAG,IAAI;;;;;;;;;;;;;;;;;;;;;YA8CrC,WAAW,qBAAqB,MAAM,GAAG,mBACxC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAO,WAAU;8BAA0D;;;;;;;;;;;;;;;;;AAOtF;GAxOwB;KAAA"}},
    {"offset": {"line": 847, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/daaniyal%20shaikh/OneDrive/Desktop/DAANISH%20SHAIKH/Next%2BNode/doctor-practice-web/next-js/components/admin/ContactMessages.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { MessageSquare, Mail, User, Clock, Search, Reply, Trash2, Phone, MapPin, CheckCircle2 } from \"lucide-react\";\r\n\r\ninterface Message {\r\n  _id?: string;\r\n  name: string;\r\n  email: string;\r\n  subject: string;\r\n  message: string;\r\n  createdAt?: string;\r\n  read?: boolean;\r\n}\r\n\r\ninterface ContactMessagesProps {\r\n  compact?: boolean;\r\n}\r\n\r\nexport default function ContactMessages({ compact = false }: ContactMessagesProps) {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [selectedMessage, setSelectedMessage] = useState<Message | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetch(`${process.env.NEXT_PUBLIC_API_URL}/admin/messages`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setMessages(Array.isArray(data) ? data : []);\r\n        setLoading(false);\r\n      })\r\n      .catch(() => {\r\n        console.log(\"Using sample messages data\");\r\n        setMessages([\r\n          {\r\n            name: \"Jane Smith\",\r\n            email: \"jane@example.com\",\r\n            subject: \"Inquiry about full body checkup\",\r\n            message: \"I would like to inquire about the charges for a full body checkup and the available time slots.\",\r\n            createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\r\n            read: false\r\n          },\r\n          {\r\n            name: \"Michael Brown\",\r\n            email: \"michael@example.com\",\r\n            subject: \"Appointment rescheduling\",\r\n            message: \"Hello, I need to reschedule my appointment for next week. Could you please help me with this?\",\r\n            createdAt: new Date(Date.now() - 5 * 60 * 60 * 1000).toISOString(),\r\n            read: false\r\n          },\r\n          {\r\n            name: \"Sarah Johnson\",\r\n            email: \"sarah@example.com\",\r\n            subject: \"Medical records request\",\r\n            message: \"I need a copy of my medical records from the last visit. How can I obtain these?\",\r\n            createdAt: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\r\n            read: true\r\n          }\r\n        ]);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const formatTimeAgo = (dateString?: string) => {\r\n    if (!dateString) return \"Unknown\";\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffInHours = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60));\r\n    \r\n    if (diffInHours < 1) return \"Just now\";\r\n    if (diffInHours < 24) return `${diffInHours} hour${diffInHours > 1 ? 's' : ''} ago`;\r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n    return `${diffInDays} day${diffInDays > 1 ? 's' : ''} ago`;\r\n  };\r\n\r\n  const filteredMessages = messages.filter(msg =>\r\n    msg.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    msg.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    msg.subject.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const unreadCount = messages.filter(msg => !msg.read).length;\r\n  const displayedMessages = compact ? filteredMessages.slice(0, 3) : filteredMessages;\r\n\r\n  const handleReply = (email: string) => {\r\n    window.location.href = `mailto:${email}?subject=Re: Your Inquiry`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"p-6 border-b border-slate-200 bg-linear-to-r from-slate-50 to-cyan-50/30\">\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-12 h-12 bg-linear-to-br from-cyan-500 to-teal-600 rounded-xl flex items-center justify-center\">\r\n              <MessageSquare className=\"text-white\" size={24} />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"text-2xl font-bold text-slate-900 flex items-center gap-2\">\r\n                {compact ? \"Recent Messages\" : \"Contact Messages\"}\r\n                {unreadCount > 0 && (\r\n                  <span className=\"bg-red-500 text-white text-xs font-bold px-2.5 py-1 rounded-full\">\r\n                    {unreadCount}\r\n                  </span>\r\n                )}\r\n              </h3>\r\n              <p className=\"text-slate-500 text-sm mt-1\">\r\n                {compact ? \"Latest messages\" : `Total: ${filteredMessages.length} messages`}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          {!compact && (\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400\" size={18} />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search messages...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none text-sm w-full sm:w-64\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Messages List */}\r\n      <div className=\"divide-y divide-slate-100\">\r\n        {loading ? (\r\n          <div className=\"p-12 text-center\">\r\n            <div className=\"inline-block w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin\"></div>\r\n            <p className=\"text-slate-500 mt-4\">Loading messages...</p>\r\n          </div>\r\n        ) : displayedMessages.length === 0 ? (\r\n          <div className=\"p-12 text-center\">\r\n            <MessageSquare className=\"mx-auto text-slate-300 mb-4\" size={48} />\r\n            <p className=\"text-slate-500 font-medium\">No messages found</p>\r\n            <p className=\"text-slate-400 text-sm mt-1\">Try adjusting your search</p>\r\n          </div>\r\n        ) : (\r\n          displayedMessages.map((message, index) => (\r\n            <div\r\n              key={message._id || index}\r\n              className={`\r\n                p-6 hover:bg-cyan-50/50 transition-colors cursor-pointer\r\n                ${!message.read ? 'bg-blue-50/50' : ''}\r\n              `}\r\n              onClick={() => !compact && setSelectedMessage(message)}\r\n            >\r\n              <div className=\"flex items-start justify-between gap-4\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex items-start gap-3 mb-3\">\r\n                    <div className={`\r\n                      w-10 h-10 bg-linear-to-br from-cyan-500 to-teal-600 rounded-lg \r\n                      flex items-center justify-center shrink-0\r\n                    `}>\r\n                      <User className=\"text-white\" size={18} />\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-center gap-2 mb-1\">\r\n                        <h4 className=\"font-bold text-slate-900\">{message.name}</h4>\r\n                        {!message.read && (\r\n                          <span className=\"w-2 h-2 bg-cyan-600 rounded-full\"></span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 text-sm text-slate-500 mb-2\">\r\n                        <Mail size={14} />\r\n                        <span className=\"truncate\">{message.email}</span>\r\n                      </div>\r\n                      <p className=\"font-semibold text-slate-700 mb-2\">{message.subject}</p>\r\n                      <p className=\"text-slate-600 text-sm line-clamp-2\">{message.message}</p>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center gap-4 text-xs text-slate-500 ml-13\">\r\n                    <div className=\"flex items-center gap-1.5\">\r\n                      <Clock size={14} />\r\n                      <span>{formatTimeAgo(message.createdAt)}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                {!compact && (\r\n                  <div className=\"flex items-center gap-2 shrink-0\">\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleReply(message.email);\r\n                      }}\r\n                      className=\"p-2 text-cyan-600 hover:bg-cyan-50 rounded-lg transition-colors\"\r\n                      title=\"Reply\"\r\n                    >\r\n                      <Reply size={18} />\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              {compact && (\r\n                <div className=\"mt-4 pt-4 border-t border-slate-100 flex items-center gap-2\">\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleReply(message.email);\r\n                    }}\r\n                    className=\"flex items-center gap-2 text-sm text-cyan-600 hover:text-cyan-700 font-medium\"\r\n                  >\r\n                    <Reply size={16} />\r\n                    <span>Reply</span>\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {compact && filteredMessages.length > 3 && (\r\n        <div className=\"p-4 border-t border-slate-200 bg-slate-50 text-center\">\r\n          <button className=\"text-cyan-600 hover:text-cyan-700 font-semibold text-sm\">\r\n            View All Messages →\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1351, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/daaniyal%20shaikh/OneDrive/Desktop/DAANISH%20SHAIKH/Next%2BNode/doctor-practice-web/next-js/app/admin/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport DashboardStats from \"@/components/admin/DashboardStats\";\nimport UserAppointments from \"@/components/admin/UserAppointment\";\nimport ContactMessages from \"@/components/admin/ContactMessages\";\nimport { \n  LayoutDashboard, \n  Calendar, \n  MessageSquare, \n  LogOut, \n  Menu, \n  X,\n  Shield,\n  User,\n  ChevronRight,\n  Lock\n} from \"lucide-react\";\n\ntype ActiveView = \"dashboard\" | \"appointments\" | \"messages\";\n\nexport default function AdminPage() {\n  const [activeView, setActiveView] = useState<ActiveView>(\"dashboard\");\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [isAuthorized, setIsAuthorized] = useState(false);\n  const [adminName, setAdminName] = useState(\"Admin User\");\n  const router = useRouter();\n\n  // SECURITY GUARD: Check authentication on direct URL access\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    const role = localStorage.getItem(\"userRole\");\n\n    if (!token || role !== \"admin\") {\n      // Redirect to login with error query for direct URL request hits\n      router.push(\"/login?error=admin_only\");\n    } else {\n      // Allow viewing only if token exists and role is admin\n      setIsAuthorized(true);\n      \n      // Fetch admin name from API\n      const apiUrl = `${process.env.NEXT_PUBLIC_API_URL}/admin/admin-name?token=${token}`;\n      console.log(\"Fetching admin name from:\", apiUrl);\n      \n      fetch(apiUrl)\n        .then(res => {\n          console.log(\"Response status:\", res.status);\n          if (!res.ok) {\n            return res.json().then(errData => {\n              console.error(\"API Error:\", errData);\n              throw new Error(errData.msg || `HTTP error! status: ${res.status}`);\n            });\n          }\n          return res.json();\n        })\n        .then(data => {\n          console.log(\"API Response:\", data);\n          if (data && data.name) {\n            setAdminName(data.name);\n          } else {\n            console.error(\"Admin name not found in response:\", data);\n          }\n        })\n        .catch(err => {\n          console.error(\"Error fetching admin name:\", err);\n        });\n    }\n  }, [router]);\n\n  const handleLogout = () => {\n    // 1. Clear all authentication data\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"userRole\");\n    localStorage.removeItem(\"userName\");\n\n    // 2. Redirect to Home page and force a hard refresh to update the Navbar\n    window.location.href = \"/\"; \n  };\n\n  const menuItems = [\n    { id: \"dashboard\" as ActiveView, label: \"Dashboard\", icon: LayoutDashboard },\n    { id: \"appointments\" as ActiveView, label: \"Appointments\", icon: Calendar },\n    { id: \"messages\" as ActiveView, label: \"Messages\", icon: MessageSquare },\n  ];\n\n  // Prevent UI rendering until authorization is verified\n  if (!isAuthorized) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-slate-900\">\n        <div className=\"text-center\">\n          <Lock className=\"text-cyan-500 animate-bounce mx-auto mb-4\" size={48} />\n          <p className=\"text-white font-medium\">Verifying Secure Access...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-linear-to-br from-slate-50 to-cyan-50/30 flex animate-fade-in\">\n      {/* Sidebar */}\n      <aside className={`\n        fixed md:static inset-y-0 left-0 z-50\n        w-72 bg-linear-to-b from-slate-900 to-slate-800 text-white\n        transform transition-transform duration-300 ease-in-out\n        ${sidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'}\n        flex flex-col\n        shadow-2xl\n      `}>\n        {/* Logo/Brand */}\n        <div className=\"p-6 border-b border-slate-700/50\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <div className=\"w-12 h-12 bg-linear-to-br from-cyan-500 to-teal-600 rounded-xl flex items-center justify-center shadow-lg\">\n              <Shield className=\"text-white\" size={24} />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-bold\">Admin Panel</h2>\n              <p className=\"text-slate-400 text-xs\">{adminName}</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Navigation */}\n        <nav className=\"flex-1 p-4 space-y-2 mt-4 overflow-y-auto\">\n          {menuItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = activeView === item.id;\n            return (\n              <button\n                key={item.id}\n                onClick={() => {\n                  setActiveView(item.id);\n                  setSidebarOpen(false);\n                }}\n                className={`\n                  w-full flex items-center gap-3 px-4 py-3.5 rounded-xl\n                  transition-all duration-200\n                  ${isActive \n                    ? 'bg-linear-to-r from-cyan-600 to-teal-600 text-white shadow-lg shadow-cyan-500/30' \n                    : 'text-slate-300 hover:bg-slate-700/50 hover:text-white'\n                  }\n                  group\n                `}\n              >\n                <Icon size={20} className={isActive ? 'text-white' : 'text-slate-400 group-hover:text-white'} />\n                <span className=\"font-medium flex-1 text-left\">{item.label}</span>\n                {isActive && <ChevronRight size={18} className=\"text-white\" />}\n              </button>\n            );\n          })}\n        </nav>\n\n        {/* User Profile & Logout */}\n        <div className=\"p-4 border-t border-slate-700/50 space-y-3\">\n          <div className=\"flex items-center gap-3 px-4 py-3 bg-slate-700/30 rounded-xl\">\n            <div className=\"w-10 h-10 bg-linear-to-br from-cyan-500 to-teal-600 rounded-lg flex items-center justify-center\">\n              <User className=\"text-white\" size={20} />\n            </div>\n            <div className=\"flex-1\">\n              <p className=\"text-white font-semibold text-sm\">{adminName}</p>\n              <p className=\"text-slate-400 text-xs\">Administrator</p>\n            </div>\n          </div>\n          \n          <button\n            onClick={handleLogout}\n            className=\"w-full flex items-center gap-3 px-4 py-3 text-slate-300 hover:text-white hover:bg-red-500/20 rounded-xl transition-all duration-200 group\"\n          >\n            <LogOut size={20} className=\"text-slate-400 group-hover:text-red-400\" />\n            <span className=\"font-medium\">Logout</span>\n          </button>\n        </div>\n      </aside>\n\n      {/* Sidebar Overlay (Mobile) */}\n      {sidebarOpen && (\n        <div \n          className=\"fixed inset-0 bg-black/50 z-40 md:hidden\"\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n\n      {/* Main Content */}\n      <main className=\"flex-1 flex flex-col min-w-0\">\n        {/* Top Header */}\n        <header className=\"bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-30 shadow-sm\">\n          <div className=\"px-4 sm:px-6 lg:px-8 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-4\">\n                <button\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                  className=\"md:hidden p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors\"\n                >\n                  {sidebarOpen ? <X size={24} /> : <Menu size={24} />}\n                </button>\n                <div>\n                  <h1 className=\"text-2xl font-bold text-slate-900 capitalize\">\n                    {activeView === \"dashboard\" ? \"Dashboard Overview\" : activeView + \" Management\"}\n                  </h1>\n                  <p className=\"text-slate-500 text-sm mt-0.5\">\n                    {activeView === \"dashboard\" && \"Monitor your clinic's performance and statistics\"}\n                    {activeView === \"appointments\" && \"View and manage patient appointments\"}\n                    {activeView === \"messages\" && \"Review and respond to patient inquiries\"}\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-3\">\n                <div className=\"hidden sm:flex items-center gap-3 px-4 py-2 bg-slate-50 rounded-xl\">\n                  <div className=\"w-10 h-10 bg-linear-to-br from-cyan-500 to-teal-600 rounded-lg flex items-center justify-center\">\n                    <User className=\"text-white\" size={20} />\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-sm font-semibold text-slate-900\">{adminName}</p>\n                    <p className=\"text-xs text-slate-500\">Administrator</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </header>\n\n        {/* Content Area */}\n        <div className=\"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto text-slate-900\">\n          <div className=\"max-w-7xl mx-auto\">\n            {activeView === \"dashboard\" && (\n              <div className=\"space-y-8 animate-fade-in\">\n                <DashboardStats />\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                  <div className=\"lg:col-span-2\">\n                    <UserAppointments compact={true} />\n                  </div>\n                  <div>\n                    <ContactMessages compact={true} />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {activeView === \"appointments\" && (\n              <div className=\"animate-fade-in\">\n                <UserAppointments compact={false} />\n              </div>\n            )}\n\n            {activeView === \"messages\" && (\n              <div className=\"animate-fade-in\">\n                <ContactMessages compact={false} />\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}